/*
* jQuery printQR - Generate QR-Codes for selected links in print stylesheet
*
* Version: 0.9
*
* Copyright (c) 2011 Stefan Motz http://www.stefan-motz.de/
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
* Usage:
*   $('a').printQr();
*   $('a').printQr({printOnly:false});
*/
(function(a){a.fn.printQr=function(c){var e={generatorUrl:"https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=",template:'{img}<div class="qrDescription"><span class="qrTitle">{title}</span><span class="qrLink">[{link}]</span></div>',shortener:null,divId:"qrCode",olId:"qrCodeList",aCounterClass:"qrCounter",counterName:"qrLinkCounter",generateStyles:true,printOnly:true,printCss:null,screenCss:null};if(c){a.extend(e,c)}if(this.length>0){a("body").append('<div id="'+e.divId+'"><ol id="'+e.olId+'"></ol></div>');if(e.generateStyles){var d=e.printCss?e.printCss:'<style type="text/css" media="'+((e.printOnly===true)?"print":"screen")+'">#'+e.divId+"{display:block;}#qrCode li{clear:both;}#qrCode li img,#qrCode li .qrDescription{float:left;}#qrCode li .qrDescription span{display:block;}#"+e.divId+" img{width:75px;height:75px;vertical-align:middle;}body{counter-reset : "+e.counterName+";}a."+e.aCounterClass+", img."+e.aCounterClass+" {counter-increment:"+e.counterName+"; }a."+e.aCounterClass+":after, img."+e.aCounterClass+':after{content:" [" counter('+e.counterName+') "]";}</style>';var b=e.screenCss?e.screenCss:'<style type="text/css" media="screen">#'+e.divId+"{display:none;}</style>";a("head").append(b);a("head").append(d)}}return this.each(function(g,k){var f,j=null,l=null,h=null,i=null;f=a(this);if(this.tagName.toUpperCase()==="A"){j=this.href}else{if(this.tagName.toUpperCase()==="IMG"){j=this.src}}if(j){f.addClass(e.aCounterClass);l=f.attr("title");if(e.shortener&&a.isFunction(e.shortener)){e.shortener(j,function(o){var n=e.generatorUrl+encodeURIComponent(o?o:j);var p='<li data-sort="'+g+'">'+e.template.replace(/{img}/,'<img src="'+n+'" />').replace(/{title}/,l).replace(/{link}/,j).replace(/{shortUrl}/,o?o:"")+"</li>";if(a("#"+e.olId+" li").length===0){a("#"+e.olId).append(p)}else{var m=false;a("#"+e.olId+" li").each(function(q,r){if(a(r).attr("data-sort")>g){a(r).before(p);m=true;return false}});if(m===false){a("#"+e.olId).append(p)}}})}else{h=e.generatorUrl+encodeURIComponent(j);i='<li data-sort="'+g+'">'+e.template.replace(/{img}/,'<img src="'+h+'" />').replace(/{title}/,l).replace(/{link}/,j)+"</li>";a("#"+e.olId).append(i)}}})}})(jQuery);